# TripNara 后台管理系统 - 页面规划

根据API接口反推的页面和功能设计。

## 📋 页面结构

```
/admin
├── /dashboard              # 首页/仪表盘
├── /users                  # 用户管理
│   ├── /                   # 用户列表
│   └── /[id]               # 用户详情/编辑
├── /messages               # 联系消息管理
│   ├── /                   # 消息列表
│   └── /[id]               # 消息详情/回复
├── /readiness              # 准备度Pack管理
│   ├── /                   # Pack列表
│   ├── /new                # 创建Pack
│   └── /[id]               # Pack详情/编辑
└── /places                 # 地点/POI管理
    ├── /                   # 地点列表（可选）
    └── /[id]               # 地点编辑
```

## 🎯 功能模块

### 1. Dashboard 首页
**功能：**
- 统计卡片（用户总数、待处理消息、活跃Pack等）
- 最近消息列表
- 快速操作入口

### 2. 用户管理 (/admin/users)
**列表页功能：**
- 用户列表表格（分页）
- 搜索框（邮箱、显示名称）
- 筛选器（邮箱验证状态）
- 操作：查看详情、编辑

**详情/编辑页功能：**
- 用户基本信息展示/编辑
- 邮箱验证状态切换
- 保存/取消操作

### 3. 联系消息管理 (/admin/messages)
**列表页功能：**
- 消息列表表格（分页）
- 状态筛选（pending/read/replied/resolved）
- 搜索框（消息内容）
- 用户筛选
- 操作：查看详情、标记状态

**详情/回复页功能：**
- 消息详情展示
- 图片展示（如果有）
- 状态切换
- 回复功能
- 状态流转按钮

### 4. 准备度Pack管理 (/admin/readiness)
**列表页功能：**
- Pack列表表格（分页）
- 国家代码筛选
- 目的地筛选
- 激活状态筛选
- 搜索框（packId、displayName）
- 操作：查看详情、编辑、删除、创建

**创建/编辑页功能：**
- Pack基本信息表单
- 地理位置信息
- 支持的季节选择
- 规则、清单、风险配置
- 版本管理
- 保存/取消操作

### 5. 地点/POI管理 (/admin/places)
**列表页功能（可选）：**
- 地点列表表格
- 分类筛选
- 城市筛选
- 搜索功能

**编辑页功能：**
- 地点基本信息编辑
- 坐标设置
- 评分设置
- 元数据编辑
- 保存/删除操作

## 🎨 UI组件需求

### 通用组件
- `DataTable` - 数据表格（支持排序、筛选）
- `Pagination` - 分页组件
- `SearchInput` - 搜索输入框
- `FilterDropdown` - 筛选下拉框
- `StatusBadge` - 状态标签
- `Button` - 按钮组件
- `Dialog` - 对话框（用于确认、表单）
- `Form` - 表单组件（基于react-hook-form）
- `Card` - 卡片容器
- `Loading` - 加载状态
- `ErrorBoundary` - 错误边界

### 布局组件
- `Sidebar` - 侧边栏导航
- `Header` - 顶部导航栏
- `Layout` - 主布局容器
- `Breadcrumb` - 面包屑导航

## 📊 数据流

1. **列表页数据流：**
   - 组件挂载 → 调用API获取列表
   - 搜索/筛选 → 更新查询参数 → 重新获取数据
   - 分页 → 更新页码 → 重新获取数据

2. **详情页数据流：**
   - 路由参数获取ID → 调用API获取详情
   - 编辑表单 → 提交 → 调用更新API → 刷新数据

3. **状态管理：**
   - 使用React Query或SWR管理API状态
   - 本地状态使用useState/useReducer

## 🔐 权限控制

- 所有管理页面需要JWT认证
- Token存储在localStorage
- 未认证用户重定向到登录页
- API请求自动携带Token
